<!DOCTYPE html>
<html data-bs-theme="light" lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Kết quả tìm kiếm - adidas-website</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>
    <!-- Header chuẩn -->
<!-- ===== BẮT ĐẦU HEADER CHUẨN (PHIÊN BẢN TÌM KIẾM HOÀN CHỈNH) ===== -->
<nav class="navbar navbar-expand-md bg-body sticky-top" style="height: 120px;">
    <div class="container-fluid">
        <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
        <a href="index.html"><img src="assets/img/Logo.jpg" width="200" height="140" style="height: 140px;"></a>
        <div class="collapse navbar-collapse" id="navcol-1" style="width: 592px;">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html" style="font-size: 30px;width: 160px;">Trang chủ</a></li>
                <li class="nav-item" style="width: 102px;"><a class="nav-link" href="Shoes.html" style="font-size: 30px;width: 78px;text-align: left;margin: 0px;min-width: 0px;margin-left: 20px;color: var(--bs-dark);">Giày</a></li>
                <li class="nav-item" style="width: 120px;"><a class="nav-link" style="font-size: 30px;width: 78px;margin-left: 20px;padding-left: 0px;padding-right: 0px;color: var(--bs-dark);" href="Man.html">Nam</a></li>
                <li class="nav-item" style="width: 160px;"><a class="nav-link" href="Women.html" style="font-size: 30px;width: 78px;color: var(--bs-dark);">Nữ</a></li>
                <li class="nav-item" style="width: 160px;"><a class="nav-link" href="Contact.html" style="font-size: 30px;width: 135px;margin-right: 0px;margin-left: -78px;color: var(--bs-black);">Liên Hệ</a></li>
            </ul>
        </div>
        
        <!-- ===== FORM TÌM KIẾM ĐÃ CẬP NHẬT ===== -->
        <form class="d-flex align-items-center" id="header-search-form">
            <input class="form-control" type="search" style="width: 240px;" placeholder="Tìm kiếm sản phẩm...">
            
            <!-- THAY ĐỔI: Thẻ <a> đã được đổi thành <button type="submit"> -->
            <button type="submit" class="btn" style="padding: 0 10px;">
                <i class="fas fa-search" style="font-size: 35px;color: var(--bs-dark);"></i>
            </button>
            
            <a href="Login.html" style="margin: 0 10px;font-size: 16px;"><i class="fas fa-user" style="font-size: 36px;color: var(--bs-dark);"></i></a>
            <a href="Cart.html" style="margin: 0 10px;font-size: 16px; position: relative;">
                <i class="fas fa-shopping-cart" style="font-size: 36px;color: var(--bs-dark);"></i>
                <span id="cart-item-count" class="badge rounded-pill bg-danger" style="position: absolute; top: -5px; right: -10px; font-size: 0.75em;">0</span>
            </a>
        </form>
        <!-- ==================================== -->
    </div>
</nav>
<!-- ===== KẾT THÚC HEADER CHUẨN ===== -->

    <div class="container my-5">
        <h1 id="search-query-title" class="mb-4"></h1>
        <hr>
        
        <!-- Khu vực hiển thị kết quả -->
        <div id="search-results-container" class="row g-4">
            <!-- Kết quả tìm kiếm sẽ được JS chèn vào đây -->
        </div>
    </div>

    <!-- Footer chuẩn -->
    <div style="background: var(--bs-dark);">
        <!-- ... (Dán footer chuẩn của bạn vào đây) ... -->
    </div>

    <!-- Modal và Scripts -->
    <div class="modal fade" id="addedToCartModal" tabindex="-1">
         <!-- ===== BẮT ĐẦU MODAL XÁC NHẬN THÊM VÀO GIỎ HÀNG ===== -->
<div class="modal fade" id="addedToCartModal" tabindex="-1" aria-labelledby="addedToCartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addedToCartModalLabel"><i class="fas fa-check-circle text-success me-2"></i> Đã thêm vào giỏ hàng!</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex align-items-center">
              <img id="modal-product-image" src="" alt="Sản phẩm" style="width: 100px; height: 100px; object-fit: cover; margin-right: 15px; border-radius: 8px;">
              <div>
                  <h6 id="modal-product-name" style="font-size: 1.1rem; font-weight: bold;">Tên sản phẩm</h6>
                  <p id="modal-product-price" class="mb-0" style="font-size: 1rem; color: #555;">Giá</p>
              </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tiếp tục mua sắm</button>
          <a href="Cart.html" class="btn btn-dark">Xem giỏ hàng</a>
        </div>
      </div>
    </div>
  </div>
  <!-- ===== KẾT THÚC MODAL ===== -->
    </div>
    
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- NHÚNG TỆP DỮ LIỆU VÀ TỆP GIỎ HÀNG -->
    <script src="assets/js/product-data.js"></script>
    <script src="assets/js/cart.js"></script>
    
    <!-- SCRIPT RIÊNG CHO TRANG TÌM KIẾM -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const resultsContainer = document.getElementById('search-results-container');
            const queryTitle = document.getElementById('search-query-title');

            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('query');

            if (!query || !resultsContainer || !queryTitle) {
                if(queryTitle) queryTitle.textContent = 'Vui lòng nhập từ khóa để tìm kiếm.';
                return;
            }

            queryTitle.innerHTML = `Kết quả tìm kiếm cho: <span class="text-primary">"${query}"</span>`;

            const lowerCaseQuery = query.toLowerCase();
            const results = allProducts.filter(product => 
                product.name.toLowerCase().includes(lowerCaseQuery) ||
                product.category.toLowerCase().includes(lowerCaseQuery)
            );

            resultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="col-12 fs-5">Không tìm thấy sản phẩm nào phù hợp.</p>';
            } else {
                const formatPrice = (price) => new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price);
                
                results.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'col-md-4 col-lg-3';
                    // Thẻ p rỗng để script cart.js có thể lấy tên (sẽ được ẩn đi)
                    productCard.innerHTML = `
                        <div class="card h-100 shadow-sm">
                            <a href="${product.url}"><img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 250px; object-fit: cover;"></a>
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text text-muted" style="display: none;">${product.name}</p>
                                <h4 class="card-text mb-3">${formatPrice(product.price)}</h4>
                                <button class="btn btn-dark mt-auto add-to-cart-btn">Thêm vào giỏ</button>
                            </div>
                        </div>
                    `;
                    resultsContainer.appendChild(productCard);
                });
                // Sau khi thêm kết quả, gán lại sự kiện cho các nút "Thêm vào giỏ" mới
                reinitializeCartButtons();
            }
        });
    </script>
</body>
</html>